(function(e){function t(t){for(var i,o,a=t[0],c=t[1],l=t[2],p=0,d=[];p<a.length;p++)o=a[p],r[o]&&d.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},s=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("64a9"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),i("svg-layout")],1)},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-wrap flex-row px-6"},[n("div",{staticClass:"w-3/4"},[n("div",{ref:"graph",style:e.layoutStyle})]),n("div",{staticClass:"w-1/4"},[n("h4",[e._v("\n      Properties\n    ")]),e.currentStep.uuid?n("sidebar",{attrs:{step:e.currentStep},on:{stepChange:e.onStepChange}}):e._e()],1)])},a=[],c=n("768b"),l=n("774e"),u=n.n(l),p=n("c64e"),d=n.n(p),h=d()(),f=d()(),m=d()(),v={steps:[{uuid:h,title:"Test",description:"",end_available:!1,input_expected:3,next_step_uuids:[f,m],executors:[],meta:{x:10,y:100,color:"#C2185B",width:200,height:100,borderRadius:5}},{uuid:f,title:"Test  2",description:"",end_available:!1,input_expected:3,next_step_uuids:[],executors:[],meta:{x:300,y:99,color:"#1f9d55",width:200,height:100,borderRadius:5}},{uuid:m,title:"Test 3",description:"",end_available:!1,input_expected:3,next_step_uuids:[],executors:[],meta:{x:10,y:500,color:"#1f9d55",width:200,height:100,borderRadius:5}}]},g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{staticClass:"bg-white px-3  pt-6 pb-8 mb-4"},[n("div",{staticClass:"mb-4"},[n("label",{staticClass:"block text-grey-darker text-sm font-bold mb-2",attrs:{for:"title"}},[e._v("\n              Title\n          ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.step.title,expression:"step.title"}],staticClass:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"title",type:"text",placeholder:"Title"},domProps:{value:e.step.title},on:{input:function(t){t.target.composing||e.$set(e.step,"title",t.target.value)}}})]),n("div",{staticClass:"mb-4"},[n("label",{staticClass:"block text-grey-darker text-sm font-bold mb-2",attrs:{for:"description"}},[e._v("\n              Description\n          ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.step.description,expression:"step.description"}],staticClass:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"description",type:"text",placeholder:"Description"},domProps:{value:e.step.description},on:{input:function(t){t.target.composing||e.$set(e.step,"description",t.target.value)}}})]),n("div",{staticClass:"mb-4"},[n("label",{staticClass:"block text-grey-darker text-sm font-bold mb-2",attrs:{for:"color"}},[e._v("\n              Color\n          ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.step.meta.color,expression:"step.meta.color"}],attrs:{type:"color",id:"color",placeholder:"Color"},domProps:{value:e.step.meta.color},on:{input:function(t){t.target.composing||e.$set(e.step.meta,"color",t.target.value)}}})])])])},b=[],y={model:{prop:"step",event:"input"},props:{step:{type:Object,required:!0}},methods:{sync:function(){this.$emit("stepChange",this.step)}},watch:{"step.title":{handler:function(){this.sync()}},"step.description":{handler:function(){this.sync()}},"step.meta.color":{handler:function(){this.sync()}}}},x=y,_=n("2877"),w=Object(_["a"])(x,g,b,!1,null,"8ead226e",null),k=w.exports,C=n("d225"),S=n("b0b4"),T=n("1929"),O=(n("a1cb"),n("7c16"),n("6c7b"),function(){function e(t,n){var i=this;Object(C["a"])(this,e),this.manager=t;var r=this.manager.layer.nodes;this.step=n,this.container=r.group().translate(n.meta.x,n.meta.y).draggy(),this._createRect(n),this._createText(n),this._createCircle(n),this.container.on("click",function(){i.manager.eventBus.emit("step.element.container.click",i)}),this.container.on("dragend",function(e){i.manager.eventBus.emit("step.element.container.dragend",e,i)})}return Object(S["a"])(e,[{key:"_createCircle",value:function(e){var t=this,n=30;this.circle=this.container.circle(n).fill("#f06").move(e.meta.width/2-n/2,e.meta.height),this.circleText=this.container.text("+").attr({x:this.circle.x()+n/2-5,y:this.circle.y()}).fill("white").font("weight","Bold"),this.circleText.on("click",function(e){e.stopPropagation(),t.manager.eventBus.emit("step.element.circle.click",t)}),this.circle.on("click",function(e){e.stopPropagation(),t.manager.eventBus.emit("step.element.circle.click",t)})}},{key:"_createText",value:function(e){this.text=this.container.text("".concat(e.title,"\n").concat(e.description))}},{key:"_createRect",value:function(e){this.rect=this.container.rect(e.meta.width,e.meta.height).fill(e.meta.color).radius(e.meta.borderRadius)}}]),e}()),j=O,P=n("7232"),B=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(C["a"])(this,e),this.connections={},this.eventBus=new P["EventEmitter2"],this.currentStep={},this.initialSteps=n.steps||[],this.steps=[],this.stepsGrouped={},this.svg=new T(n.el).size("100%","100%"),this.layer={markers:this.svg.group(),links:this.svg.group(),nodes:this.svg.group()},this.initialSteps.map(function(e){t.addStep(e)}),this.reconnectSteps(),this.eventBus.on("step.element.circle.click",function(e){t.onAddStepClick(e)}),this.eventBus.on("step.element.container.dragend",function(e,n){t.onElementDragEnd(e,n)})}return Object(S["a"])(e,null,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new this.prototype.constructor(e)}}]),Object(S["a"])(e,[{key:"connectStepTo",value:function(e,t){var n="".concat(e.uuid,"|").concat(t.uuid);this.connections[n]||(this.connections[n]={step:e,nextStep:t},e.element.container.connectable({container:this.layer.links,markers:this.layer.markers},t.element.container).setLineColor("#5D4037"))}},{key:"onElementDragEnd",value:function(e,t){var n=e.target.getCTM();t.step.meta.x=n.e,t.step.meta.y=n.f}},{key:"onAddStepClick",value:function(e){var t=e.container.node.getCTM(),n={uuid:d()(),title:"Title",description:"Description",end_available:!1,input_expected:3,next_step_uuids:[],executors:[],meta:{x:t.e,y:t.f+e.step.meta.height+50,color:"#C2185B",width:200,height:100,borderRadius:5}};this.addStep(n,e.step)}},{key:"reconnectSteps",value:function(){var e=this;this.steps.map(function(t){t.next_step_uuids.map(function(n){var i=e.stepsGrouped[n];i&&e.connectStepTo(t,i)})})}},{key:"addStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.element||(e.element=new j(this,e)),this.stepsGrouped[e.uuid]||this.steps.push(e),this.stepsGrouped[e.uuid]=e,t&&this.connectStepTo(t,e)}}]),e}(),M=B,E={name:"SvgLayout",components:{sidebar:k},data:function(){return{currentStep:{},layoutStyle:{height:"800px","overflow-y":"auto"},svg:null,data:v,layer:{}}},mounted:function(){var e=this;this.stepManager=M.make({el:this.$refs.graph,steps:this.data.steps}),this.stepManager.eventBus.on("step.element.container.click",function(t){e.currentStep=t.step})},methods:{onStepChange:function(e){var t=u()(e.element.container.node.children),n=Object(c["a"])(t,2),i=n[0],r=n[1];r.firstChild.innerHTML="".concat(e.title),r.lastChild.innerHTML="".concat(e.description),i.setAttribute("fill",e.meta.color)}}},$=E,R=Object(_["a"])($,o,a,!1,null,"db7b43b6",null),D=R.exports,G={name:"app",components:{"svg-layout":D}},L=G,A=(n("034f"),Object(_["a"])(L,r,s,!1,null,null,null)),N=A.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(N)}}).$mount("#app")},"64a9":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.017e2d90.js.map